{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ablayelo/Documents/Builds/suivi-vol/flight-tracker/src/app/api/flights/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nexport async function GET(request: Request) {\n    const { searchParams } = new URL(request.url);\n    const flightIata = searchParams.get('flight_iata');\n\n    if (!flightIata) {\n        return NextResponse.json({ error: 'Flight IATA code is required' }, { status: 400 });\n    }\n\n    const API_KEY = process.env.NEXT_PUBLIC_AVIATION_API_KEY;\n\n    if (!API_KEY) {\n        console.error('Missing API Key');\n        return NextResponse.json({ error: 'API configuration error' }, { status: 500 });\n    }\n\n    try {\n        const url = `http://api.aviationstack.com/v1/flights?access_key=${API_KEY}&flight_iata=${flightIata}&limit=1`;\n        console.log(`Fetching from: ${url.replace(API_KEY, '***')}`);\n\n        const response = await fetch(url);\n        const responseText = await response.text();\n\n        console.log('Upstream status:', response.status);\n        // console.log('Upstream response:', responseText); // Uncomment for full debug if needed\n\n        if (!response.ok) {\n            throw new Error(`Upstream API error: ${response.status} ${response.statusText} - ${responseText.substring(0, 100)}`);\n        }\n\n        let data;\n        try {\n            data = JSON.parse(responseText);\n        } catch (e) {\n            throw new Error(`Invalid JSON from upstream: ${responseText.substring(0, 100)}...`);\n        }\n\n        return NextResponse.json(data);\n    } catch (error: any) {\n        console.error('Flight API Error:', error);\n        return NextResponse.json({ error: error.message || 'Failed to fetch flight data' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAgB;IACtC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,aAAa,aAAa,GAAG,CAAC;IAEpC,IAAI,CAAC,YAAY;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACtF;IAEA,MAAM;IAEN;;IAKA,IAAI;QACA,MAAM,MAAM,CAAC,mDAAmD,EAAE,QAAQ,aAAa,EAAE,WAAW,QAAQ,CAAC;QAC7G,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,OAAO,CAAC,SAAS,QAAQ;QAE3D,MAAM,WAAW,MAAM,MAAM;QAC7B,MAAM,eAAe,MAAM,SAAS,IAAI;QAExC,QAAQ,GAAG,CAAC,oBAAoB,SAAS,MAAM;QAC/C,yFAAyF;QAEzF,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,CAAC,GAAG,EAAE,aAAa,SAAS,CAAC,GAAG,MAAM;QACvH;QAEA,IAAI;QACJ,IAAI;YACA,OAAO,KAAK,KAAK,CAAC;QACtB,EAAE,OAAO,GAAG;YACR,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,aAAa,SAAS,CAAC,GAAG,KAAK,GAAG,CAAC;QACtF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO,IAAI;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACtG;AACJ"}}]
}